# 云端数据格式
## 1. APP数据发送/接收区/设备数据发送/接收区

|通讯类型|事件序号|设备类型|目标地址|数据长度|控制命令|数据|校验和|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|1 Byte|1 Byte|1 Byte|2 Byte|1 Byte|24 Byte|1 Byte|1 Byte|

## 2. 数据介绍
### (1). 通讯类型
|数据|意义|
|:-:|:-:|
|0x00|结束此次通讯流程|
|0x01|APP读取数据等待设备应答|
|0x02|设备回应APP读取数据|
|0x03|APP写入设备数据等待应答|
|0x04|设备应答APP写入数据|
|0x05|设备读取APP信息等待应答|
|0x06|APP应答设备信息|
|0x07|设备上报信息等待APP应答|
|0x08|APP应答设备上报信息|
|0x09|校验码错误|

### (2). 事件序号
等待应答的事件序号应与应答的事件序号保持一致。

### (3). 设备类型
|设备类型|设备代码|
|:-:|:-:|
|灯|0x01|
|插座|0x02|
|窗帘|0x03|

### (4). 设备短地址
设备在网络中的地址(可能不固定)。

### (5). 数据长度
数据长度表示数据的具体长度，不能超过最大数据长度。

### (6). 控制命令
控制命令根据设备的不同而不同。

### (7). 数据
见数据点介绍。

### (8).校验和
校验和的计算方式为把数据包从通讯类型为开始按字节求和得出的结果对256求余。

## 3. 数据点介绍(对应数据的内容)
### (1). 灯数据点介绍
|控制命令|控制命令介绍|权限|数据点|数据点大小|参数枚举|
|:-:|:-:|:-:|:-:|:-:|:-:|
|0x01|APP通过该命令设置灯的亮度|读写|灯的亮度|2 Byte|0~1000|
|0x02|APP通过该命令设置灯的定时器|读写|定时器类型|1 Byte|保留|
|-|-|-|工作模式|2 Byte|0x0000：工作一次；0x0001：每天工作；0x0002：开启自定义模式；0x0004：周一工作；0x0008：周二工作；0x0010：周三工作；0x0020：周四工作；0x0040：周五工作；0x0080：周六工作；0x0100：周日工作(注：自定义工作模式参数可叠加)|
|-|-|-|在此期间内灯的亮度|2 Byte|0~1000|
|-|-|-|灯的开启时间-小时|1 Byte|0~23|
|-|-|-|灯的开启时间-分钟|1 Byte|0~59|
|-|-|-|灯的关闭时间-小时|1 Byte|0~23|
|-|-|-|灯的关闭时间-分钟|1 Byte|0~59|
|0x03|APP通过该命令设置灯的定时器|读写|定时器类型|1 Byte|保留|
|-|-|-|工作模式|2 Byte|0x0000：工作一次；0x0001：每天工作；0x0002：开启自定义模式；0x0004：周一工作；0x0008：周二工作；0x0010：周三工作；0x0020：周四工作；0x0040：周五工作；0x0080：周六工作；0x0100：周日工作(注：自定义工作模式参数可叠加)|
|-|-|-|在此期间内灯的亮度|2 Byte|0~1000|
|-|-|-|灯的开启时间-小时|1 Byte|0~23|
|-|-|-|灯的开启时间-分钟|1 Byte|0~59|
|-|-|-|灯的关闭时间-小时|1 Byte|0~23|
|-|-|-|灯的关闭时间-分钟|1 Byte|0~59|

### (2).插座数据点
|控制命令|控制命令介绍|权限|数据点|数据点大小|参数枚举|
|:-:|:-:|:-:|:-:|:-:|:-:|
|0x01|APP通过该命令设置插座的状态|读写|插座的状态|1 Byte|0~1|
|0x02|APP通过该命令设置插座的定时器|读写|定时器类型|1 Byte|保留|
|-|-|-|工作模式|2 Byte|0x0000：工作一次；0x0001：每天工作；0x0002：开启自定义模式；0x0004：周一工作；0x0008：周二工作；0x0010：周三工作；0x0020：周四工作；0x0040：周五工作；0x0080：周六工作；0x0100：周日工作(注：自定义工作模式参数可叠加)|
|-|-|-|在此期间内插座的亮度|2 Byte|0~1000|
|-|-|-|插座的开启时间-小时|1 Byte|0~23|
|-|-|-|插座的开启时间-分钟|1 Byte|0~59|
|-|-|-|插座的关闭时间-小时|1 Byte|0~23|
|-|-|-|插座的关闭时间-分钟|1 Byte|0~59|
|0x03|APP通过该命令设置插座的定时器|读写|定时器类型|1 Byte|保留|
|-|-|-|工作模式|2 Byte|0x0000：工作一次；0x0001：每天工作；0x0002：开启自定义模式；0x0004：周一工作；0x0008：周二工作；0x0010：周三工作；0x0020：周四工作；0x0040：周五工作；0x0080：周六工作；0x0100：周日工作(注：自定义工作模式参数可叠加)|
|-|-|-|插座此期间内灯的亮度|2 Byte|0~1000|
|-|-|-|插座的开启时间-小时|1 Byte|0~23|
|-|-|-|插座的开启时间-分钟|1 Byte|0~59|
|-|-|-|插座的关闭时间-小时|1 Byte|0~23|
|-|-|-|插座的关闭时间-分钟|1 Byte|0~59|


### (3).窗帘数据点
|控制命令|控制命令介绍|权限|数据点|数据点大小|参数枚举|
|:-:|:-:|:-:|:-:|:-:|:-:|
|0x01|APP通过该命令设置窗帘的状态|读写|窗帘的状态|1 Byte|0~1|
|0x02|APP通过该命令设置窗帘的工作模式|读写|智能关闭开关|1 Byte|0~1|
|-|-|-|设定自动关闭窗帘的湿度|1 Byte|0~100|
|0x02|APP通过该命令设置窗帘的定时器|读写|定时器类型|1 Byte|保留|
|-|-|-|工作模式|2 Byte|0x0000：工作一次；0x0001：每天工作；0x0002：开启自定义模式；0x0004：周一工作；0x0008：周二工作；0x0010：周三工作；0x0020：周四工作；0x0040：周五工作；0x0080：周六工作；0x0100：周日工作(注：自定义工作模式参数可叠加)|
|-|-|-|窗帘的开启时间-小时|1 Byte|0~23|
|-|-|-|窗帘的开启时间-分钟|1 Byte|0~59|
|-|-|-|窗帘的关闭时间-小时|1 Byte|0~23|
|-|-|-|窗帘的关闭时间-分钟|1 Byte|0~59|
|0x03|APP通过该命令设置窗帘的定时器|读写|定时器类型|1 Byte|保留|
|-|-|-|工作模式|2 Byte|0x0000：工作一次；0x0001：每天工作；0x0002：开启自定义模式；0x0004：周一工作；0x0008：周二工作；0x0010：周三工作；0x0020：周四工作；0x0040：周五工作；0x0080：周六工作；0x0100：周日工作(注：自定义工作模式参数可叠加)|
|-|-|-|窗帘的开启时间-小时|1 Byte|0~23|
|-|-|-|窗帘的开启时间-分钟|1 Byte|0~59|
|-|-|-|窗帘的关闭时间-小时|1 Byte|0~23|
|-|-|-|窗帘的关闭时间-分钟|1 Byte|0~59|

### (4).温湿度感应器数据点
|控制命令|控制命令介绍|权限|数据点|数据点大小|参数枚举|
|:-:|:-:|:-:|:-:|:-:|:-:|
|0x01|APP通过该命令读取室内的温湿度|只读|室内的温度|1 Byte|0~100|
|-|-|-|室内的湿度|1 Byte|0~100|

## 4. 获取设备列表命令介绍
|控制命令|控制命令介绍|权限|数据点|数据点大小|参数枚举|
|:-:|:-:|:-:|:-:|:-:|:-:|
|0x01|APP通过该命令获取目前设备的数量|只读|设备的数量|1 Byte|1~255|
|0x02|APP通过该命令获取目前设备的MAC地址|只读|设备的MAC地址|6 Byte|未知|
|-|-|-|设备的备注信息|1~15Byte|未知|
|3|MAC地址发送完成标志|只读|-|-|-|

备注：
1. 当APP需要获取设备信息时，需要先获取在网设备数量(此命令的目标MAC地址可为空)，然后再获取设备MAC地址。
2. 设备发送MAC地址时，一次只发送一台设备的MAC地址，当APP接收完此次发送的数据之后需要再次向设备请求获取MAC地址(此时不需要获取设备信息)。

## 5. 备注
1. 完成一次通讯流程之后通讯发起方需要发送结束通讯流程命令。
2. 校验码错误不需要应答回应。
